(()=>{"use strict";const t=class{constructor(t){this.params=t}setTitle(t){document.title=t}async getHtml(){return""}},e=class extends t{constructor(t){super(t),this.setTitle("Dashboard")}async getHtml(){return'\n            <h1>Добро пожаловать!</h1>\n            <p>\n                SPA \n            </p>\n            <p>\n                <a href="/id1" data-link>Миша</a>\n                <a href="/id2" data-link>Артём</a>\n            </p>\n        '}},n=class extends t{constructor(t){super(t),this.setTitle("Settings")}async getHtml(){return"\n            <h1>Настройки</h1>\n            <p>Страница настроек.</p>\n        "}},s=class extends t{constructor(t){super(t),this.postId=t.id,this.setTitle("Профиль")}async getHtml(){return`\n            <h1>Профиль</h1>\n            <p>Ты видишь страницу пользователя с id  ${this.postId}.</p>\n        `}},a=async()=>{const t=[{path:"/",view:e},{path:"/settings",view:n},{path:"/id:id",view:s}];let a=t.map((t=>{return{route:t,result:location.pathname.match((e=t.path,new RegExp("^"+e.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")+"$")))};var e})).find((t=>null!==t.result));a||(a={route:t[0],result:[location.pathname]});const r=new a.route.view((t=>{const e=t.result.slice(1),n=Array.from(t.route.path.matchAll(/:(\w+)/g)).map((t=>t[1]));return Object.fromEntries(n.map(((t,n)=>[t,e[n]])))})(a));document.querySelector("#app").innerHTML=await r.getHtml()};window.addEventListener("popstate",a),document.addEventListener("DOMContentLoaded",(()=>{document.body.addEventListener("click",(t=>{var e;t.target.matches("[data-link]")&&(t.preventDefault(),e=t.target.href,history.pushState(null,null,e),a())})),a()}))})();